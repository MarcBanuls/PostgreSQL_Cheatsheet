---
title: "PosgreSQL Cheatsheet"
author: "Marc Ba√±uls Tornero"
date: "11/3/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

For the examples we will use the tables A, B or C depending on the number of tables needed. The rows of table A will be persons with IDs, name, surname, age and email columns. The table B will be for cars with ID model, brand and year as columns. To create randomized databases there is a webpage named Mockaroo, and with this I can test the different commandos without having to worry about sharing sensitive or personal content.
<<<<<<< HEAD


# Create table
CREATE TABLE A (
id BIGSERIAL NOTNULL PRIMARY KEY,
name VARCHAR(50) NOT NULL,
surname VARCHAR(50) NOT NULL,
age INT NOT NULL,
email VARCHAR(50)
);

# Erase table
DROP TABLE A;

# Insert records
INSERT INTO A (
name,
surname,
age,
email
)
VALUES ('Marc', 'Banuls', 'MALE', '25','marc.banuls.96@gmail.com');


# Select all or some of the rows from a table
SELECT * FROM A;
SELECT name, age FROM A;

# Order alphabetically or numerically (ascending or descending optional argument)
SELECT * FROM A ORDER BY name, ASC;

# select only distinct variables from a column or row
SELECT DISTINCT age FROM A;

# select by a complete match in a column or several columns (AND)
SELECT * FROM A WHERE gender = 'MALE';
SELECT * FROM A WHERE gender = 'FEMALE' AND age = '22';

# select by match in a pattern

# Comparison
<> not equal
= equal

# Limit first numbers of rows shown
SELECT * FROM A LIMIT 10;

# Limit where starts showing rows
SELECT * FROM A OFFSET 5;

# Fetch specific rows
SELECT * FROM A FETCH FIRST 5 ROW ONLY;

# Filter rows with OR and WHERE
SELECT * FROM A WHERE age = '22', OR age = '25';

# Filter rows with multiple column patterns without OR
SELECT * FROM A WHERE age IN ('22', '25);

# Select a range of data (*only with dates? check*)
SELECT * FROM A WHERE age BETWEEN '22' AND '25';

# Select by similar pattern, with or without mayus filtering
SELECT * FROM A WHERE surname LIKE '%uls';
SELECT * FROM A WHERE surname ILIKE '%ULS';

# Group using a column
SELECT name FROM A GROUP BY age;

# Count repetitions of grouped table
SELECT name, COUNT(*) FROM A GROUP BY age;

# Select rows that have more or less counts grouped by a column
SELECT name, COUNT(\*) FROM A GROUP BY  age HAVING COUNT(\*) >10  ORDER BY age;

# Min max average sum
SELECT ROUND(AVG(age)) FROM A;
SELECT name, surname, MAX(age) FROM A;
SELECT SUM(age) FROM A




